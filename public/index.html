<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HWID Reset | ErenXiters</title>
<style>
body { font-family: 'Segoe UI', sans-serif; background:#1a1a1a; color:#fff; display:flex; justify-content:center; align-items:center; height:100vh; margin:0; }
.container { background:#111; padding:30px; border-radius:12px; width:100%; max-width:400px; }
h1 { text-align:center; color:#00ffc6; margin-bottom:20px; }
label { display:block; margin-top:15px; font-weight:bold; }
input, select, button { width:100%; padding:10px; margin-top:5px; border-radius:8px; border:none; font-size:16px; }
button { margin-top:20px; background:#00ffc6; color:#000; font-weight:bold; cursor:pointer; transition:0.3s; }
button:hover { background:#00e0b0; }
.status { margin-top:15px; padding:10px; border-radius:8px; display:none; font-weight:bold; text-align:center; }
.status.success { background:#28a745; color:#fff; }
.status.error { background:#dc3545; color:#fff; }
.status.info { background:#ffc107; color:#000; }
</style>
</head>
<body>

<div class="container">
<h1>HWID Reset</h1>

<label for="category">Category</label>
<select id="category">
    <option value="">Select Category</option>
    <option value="EREN">EREN</option>
    <option value="INSANE">INSANE</option>
    <option value="MAXGAMER">MAXGAMER</option>
    <option value="SALZ">SALZ</option>
    <option value="CYBER">CYBER</option>
    <option value="AIM">AIM</option>
    <option value="SNIPER">SNIPER</option>
    <option value="B4EVER">B4EVER</option>
</select>

<label for="username">Username</label>
<input type="text" id="username" placeholder="Enter username">

<label for="password">Password</label>
<input type="password" id="password" placeholder="Enter password">

<button id="resetBtn">Reset HWID</button>

<div id="status" class="status"></div>
</div>

<script>
const resetBtn = document.getElementById('resetBtn');
const statusDiv = document.getElementById('status');

function showStatus(msg, type='info') {
    statusDiv.style.display='block';
    statusDiv.textContent = msg;
    statusDiv.className = 'status ' + type;
}

resetBtn.addEventListener('click', async () => {
    const category = document.getElementById('category').value.trim();
    const username = document.getElementById('username').value.trim();
    const password = document.getElementById('password').value.trim();

    if (!category || !username || !password) {
        showStatus('⚠️ Fill all fields', 'error');
        return;
    }

    showStatus('⏳ Resetting HWID...', 'info');

    try {
        const newHWID = crypto.randomUUID(); // generates HWID
        const url = `/.netlify/functions/updateHWID?category=${encodeURIComponent(category)}&username=${encodeURIComponent(username)}&password=${encodeURIComponent(password)}&updatedhwid=${encodeURIComponent(newHWID)}`;

        const res = await fetch(url);
        const data = await res.json();

        if (!res.ok) throw new Error(data.error || 'Unknown error');

        showStatus(`✅ HWID reset! New HWID: ${newHWID}`, 'success');
    } catch(err) {
        showStatus('❌ ' + err.message, 'error');
    }
});
</script>

</body>
</html>
